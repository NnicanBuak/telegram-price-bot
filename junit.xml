<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="6" skipped="0" tests="96" time="5.332" timestamp="2025-08-09T21:46:33.730659+08:00" hostname="DESKTOP-L3VL5UE"><testcase classname="tests.test_bot.TestConfig" name="test_config_loading" file="tests\test_bot.py" line="29" time="0.193" /><testcase classname="tests.test_bot.TestConfig" name="test_config_validation" file="tests\test_bot.py" line="37" time="0.006" /><testcase classname="tests.test_bot.TestDatabase" name="test_create_template" file="tests\test_bot.py" line="59" time="0.078" /><testcase classname="tests.test_bot.TestDatabase" name="test_create_template_with_file" file="tests\test_bot.py" line="71" time="0.026" /><testcase classname="tests.test_bot.TestDatabase" name="test_get_templates" file="tests\test_bot.py" line="84" time="0.037" /><testcase classname="tests.test_bot.TestDatabase" name="test_update_template" file="tests\test_bot.py" line="96" time="0.034" /><testcase classname="tests.test_bot.TestDatabase" name="test_delete_template" file="tests\test_bot.py" line="108" time="0.034" /><testcase classname="tests.test_bot.TestDatabase" name="test_create_chat_group" file="tests\test_bot.py" line="120" time="0.027" /><testcase classname="tests.test_bot.TestDatabase" name="test_get_chat_groups" file="tests\test_bot.py" line="132" time="0.040" /><testcase classname="tests.test_bot.TestDatabase" name="test_create_mailing" file="tests\test_bot.py" line="143" time="0.040" /><testcase classname="tests.test_bot.TestDatabase" name="test_update_mailing_stats" file="tests\test_bot.py" line="158" time="0.043" /><testcase classname="tests.test_bot.TestMenuSystem" name="test_menu_initialization" file="tests\test_bot.py" line="182" time="0.002" /><testcase classname="tests.test_bot.TestMenuSystem" name="test_is_admin" file="tests\test_bot.py" line="189" time="0.002" /><testcase classname="tests.test_bot.TestMenuSystem" name="test_get_menu_access" file="tests\test_bot.py" line="195" time="0.002" /><testcase classname="tests.test_bot.TestMenuSystem" name="test_menu_navigation" file="tests\test_bot.py" line="206" time="0.002" /><testcase classname="tests.test_bot.TestMenuSystem" name="test_build_keyboard" file="tests\test_bot.py" line="227" time="0.002"><failure message="NameError: name 'InlineKeyboardMarkup' is not defined">tests\test_bot.py:233: in test_build_keyboard
    assert isinstance(keyboard, InlineKeyboardMarkup)
                                ^^^^^^^^^^^^^^^^^^^^
E   NameError: name 'InlineKeyboardMarkup' is not defined</failure></testcase><testcase classname="tests.test_bot.TestMenuSystem" name="test_add_dynamic_menu" file="tests\test_bot.py" line="244" time="0.002" /><testcase classname="tests.test_bot.TestMenuSystem" name="test_menu_export_import" file="tests\test_bot.py" line="259" time="0.003" /><testcase classname="tests.test_bot.TestBotHandlers" name="test_start_command_admin" file="tests\test_bot.py" line="305" time="0.019"><failure message="aiogram.utils.token.TokenValidationError: Token is invalid!">tests\test_bot.py:312: in test_start_command_admin
    from bot import cmd_start
bot.py:46: in &lt;module&gt;
    bot = Bot(token=config.bot_token)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv\Lib\site-packages\aiogram\client\bot.py:270: in __init__
    validate_token(token)
venv\Lib\site-packages\aiogram\utils\token.py:27: in validate_token
    raise TokenValidationError("Token is invalid!")
E   aiogram.utils.token.TokenValidationError: Token is invalid!</failure></testcase><testcase classname="tests.test_bot.TestBotHandlers" name="test_menu_middleware_access_denied" file="tests\test_bot.py" line="323" time="0.019" /><testcase classname="tests.test_bot.TestBotHandlers" name="test_menu_navigation_callback" file="tests\test_bot.py" line="353" time="0.016" /><testcase classname="tests.test_bot.TestIntegration" name="test_full_mailing_flow" file="tests\test_bot.py" line="391" time="0.070" /><testcase classname="tests.test_bot.TestIntegration" name="test_menu_with_database_data" file="tests\test_bot.py" line="430" time="0.068" /><testcase classname="tests.test_bot" name="test_bot_lifecycle" file="tests\test_bot.py" line="468" time="0.007"><failure message="aiogram.utils.token.TokenValidationError: Token is invalid!">tests\test_bot.py:472: in test_bot_lifecycle
    from bot import bot, dp, db
bot.py:46: in &lt;module&gt;
    bot = Bot(token=config.bot_token)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv\Lib\site-packages\aiogram\client\bot.py:270: in __init__
    validate_token(token)
venv\Lib\site-packages\aiogram\utils\token.py:27: in validate_token
    raise TokenValidationError("Token is invalid!")
E   aiogram.utils.token.TokenValidationError: Token is invalid!</failure></testcase><testcase classname="tests.test_database.TestTemplateOperations" name="test_create_template_minimal" file="tests\test_database.py" line="59" time="0.030" /><testcase classname="tests.test_database.TestTemplateOperations" name="test_create_template_with_file" file="tests\test_database.py" line="74" time="0.029" /><testcase classname="tests.test_database.TestTemplateOperations" name="test_create_template_with_photo" file="tests\test_database.py" line="87" time="0.030" /><testcase classname="tests.test_database.TestTemplateOperations" name="test_get_template_by_id" file="tests\test_database.py" line="99" time="0.035" /><testcase classname="tests.test_database.TestTemplateOperations" name="test_get_nonexistent_template" file="tests\test_database.py" line="111" time="0.024" /><testcase classname="tests.test_database.TestTemplateOperations" name="test_get_all_templates" file="tests\test_database.py" line="117" time="0.085" /><testcase classname="tests.test_database.TestTemplateOperations" name="test_update_template" file="tests\test_database.py" line="129" time="0.054" /><testcase classname="tests.test_database.TestTemplateOperations" name="test_update_nonexistent_template" file="tests\test_database.py" line="148" time="0.033" /><testcase classname="tests.test_database.TestTemplateOperations" name="test_delete_template" file="tests\test_database.py" line="154" time="0.064" /><testcase classname="tests.test_database.TestTemplateOperations" name="test_delete_nonexistent_template" file="tests\test_database.py" line="168" time="0.032" /><testcase classname="tests.test_database.TestChatGroupOperations" name="test_create_chat_group" file="tests\test_database.py" line="178" time="0.036" /><testcase classname="tests.test_database.TestChatGroupOperations" name="test_create_empty_chat_group" file="tests\test_database.py" line="193" time="0.026" /><testcase classname="tests.test_database.TestChatGroupOperations" name="test_get_chat_group_by_id" file="tests\test_database.py" line="200" time="0.031" /><testcase classname="tests.test_database.TestChatGroupOperations" name="test_get_all_chat_groups" file="tests\test_database.py" line="212" time="0.081" /><testcase classname="tests.test_database.TestChatGroupOperations" name="test_get_chat_groups_by_ids" file="tests\test_database.py" line="224" time="0.094" /><testcase classname="tests.test_database.TestChatGroupOperations" name="test_update_chat_group" file="tests\test_database.py" line="239" time="0.042" /><testcase classname="tests.test_database.TestChatGroupOperations" name="test_delete_chat_group" file="tests\test_database.py" line="252" time="0.042" /><testcase classname="tests.test_database.TestMailingOperations" name="test_create_mailing" file="tests\test_database.py" line="268" time="0.087" /><testcase classname="tests.test_database.TestMailingOperations" name="test_update_mailing_stats" file="tests\test_database.py" line="288" time="0.094" /><testcase classname="tests.test_database.TestMailingOperations" name="test_get_mailings_history" file="tests\test_database.py" line="308" time="0.099" /><testcase classname="tests.test_database.TestMailingOperations" name="test_get_mailings_history_with_limit" file="tests\test_database.py" line="327" time="0.143" /><testcase classname="tests.test_database.TestDatabaseTransactions" name="test_concurrent_template_creation" file="tests\test_database.py" line="346" time="0.070" /><testcase classname="tests.test_database.TestDatabaseTransactions" name="test_cascade_operations" file="tests\test_database.py" line="364" time="0.089" /><testcase classname="tests.test_database.TestDatabaseTransactions" name="test_json_field_integrity" file="tests\test_database.py" line="381" time="0.033" /><testcase classname="tests.test_database.TestDatabasePerformance" name="test_bulk_template_creation" file="tests\test_database.py" line="399" time="0.492" /><testcase classname="tests.test_database.TestDatabasePerformance" name="test_large_chat_group" file="tests\test_database.py" line="418" time="0.030" /><testcase classname="tests.test_database.TestDatabaseEdgeCases" name="test_empty_template_name" file="tests\test_database.py" line="438" time="0.039" /><testcase classname="tests.test_database.TestDatabaseEdgeCases" name="test_very_long_text" file="tests\test_database.py" line="445" time="0.058" /><testcase classname="tests.test_database.TestDatabaseEdgeCases" name="test_special_characters_in_text" file="tests\test_database.py" line="458" time="0.040" /><testcase classname="tests.test_integration.TestFullWorkflow" name="test_complete_mailing_workflow" file="tests\test_integration.py" line="42" time="0.060" /><testcase classname="tests.test_integration.TestFullWorkflow" name="test_menu_navigation_workflow" file="tests\test_integration.py" line="102" time="0.018" /><testcase classname="tests.test_integration.TestFullWorkflow" name="test_access_control_workflow" file="tests\test_integration.py" line="133" time="0.031" /><testcase classname="tests.test_integration.TestBotIntegration" name="test_bot_initialization" file="tests\test_integration.py" line="184" time="0.028"><failure message="NameError: name 'admin_only' is not defined">tests\test_integration.py:199: in test_bot_initialization
    from bot import bot, dp
bot.py:97: in &lt;module&gt;
    @admin_only
     ^^^^^^^^^^
E   NameError: name 'admin_only' is not defined</failure></testcase><testcase classname="tests.test_integration.TestBotIntegration" name="test_command_handlers" file="tests\test_integration.py" line="204" time="0.025"><failure message="aiogram.utils.token.TokenValidationError: Token is invalid!">tests\test_integration.py:220: in test_command_handlers
    from bot import cmd_start
bot.py:46: in &lt;module&gt;
    bot = Bot(token=config.bot_token)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv\Lib\site-packages\aiogram\client\bot.py:270: in __init__
    validate_token(token)
venv\Lib\site-packages\aiogram\utils\token.py:27: in validate_token
    raise TokenValidationError("Token is invalid!")
E   aiogram.utils.token.TokenValidationError: Token is invalid!</failure></testcase><testcase classname="tests.test_integration.TestBotIntegration" name="test_callback_query_handling" file="tests\test_integration.py" line="237" time="0.027" /><testcase classname="tests.test_integration.TestDatabaseIntegration" name="test_database_with_real_data" file="tests\test_integration.py" line="263" time="0.132" /><testcase classname="tests.test_integration.TestErrorHandling" name="test_database_connection_error" file="tests\test_integration.py" line="331" time="0.035" /><testcase classname="tests.test_integration.TestErrorHandling" name="test_invalid_bot_token" file="tests\test_integration.py" line="338" time="0.013"><failure message="assert 'Invalid token' in &quot;name 'admin_only' is not defined&quot;&#10; +  where &quot;name 'admin_only' is not defined&quot; = str(NameError(&quot;name 'admin_only' is not defined&quot;))">tests\test_integration.py:349: in test_invalid_bot_token
    from bot import bot
bot.py:97: in &lt;module&gt;
    @admin_only
     ^^^^^^^^^^
E   NameError: name 'admin_only' is not defined

During handling of the above exception, another exception occurred:
tests\test_integration.py:354: in test_invalid_bot_token
    assert "Invalid token" in str(e)
E   assert 'Invalid token' in "name 'admin_only' is not defined"
E    +  where "name 'admin_only' is not defined" = str(NameError("name 'admin_only' is not defined"))</failure></testcase><testcase classname="tests.test_integration.TestErrorHandling" name="test_missing_admin_ids" file="tests\test_integration.py" line="355" time="0.003" /><testcase classname="tests.test_integration.TestErrorHandling" name="test_menu_error_handling" file="tests\test_integration.py" line="364" time="0.026" /><testcase classname="tests.test_integration.TestPerformance" name="test_large_scale_operation" file="tests\test_integration.py" line="386" time="0.491" /><testcase classname="tests.test_menu_system.TestMenuItem" name="test_menu_item_creation" file="tests\test_menu_system.py" line="16" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuItem" name="test_menu_item_defaults" file="tests\test_menu_system.py" line="34" time="0.002" /><testcase classname="tests.test_menu_system.TestMenu" name="test_menu_creation" file="tests\test_menu_system.py" line="54" time="0.002" /><testcase classname="tests.test_menu_system.TestMenu" name="test_add_item" file="tests\test_menu_system.py" line="70" time="0.002" /><testcase classname="tests.test_menu_system.TestMenu" name="test_remove_item" file="tests\test_menu_system.py" line="81" time="0.002" /><testcase classname="tests.test_menu_system.TestMenu" name="test_method_chaining" file="tests\test_menu_system.py" line="95" time="0.001" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_initialization" file="tests\test_menu_system.py" line="116" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_is_admin" file="tests\test_menu_system.py" line="128" time="0.003" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_register_menu" file="tests\test_menu_system.py" line="135" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_get_menu_access_control" file="tests\test_menu_system.py" line="143" time="0.003" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_current_menu_tracking" file="tests\test_menu_system.py" line="154" time="0.003" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_menu_history" file="tests\test_menu_system.py" line="169" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_history_limit" file="tests\test_menu_system.py" line="191" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_build_keyboard_simple" file="tests\test_menu_system.py" line="205" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_build_keyboard_with_icons" file="tests\test_menu_system.py" line="218" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_build_keyboard_columns" file="tests\test_menu_system.py" line="234" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_build_keyboard_with_back_button" file="tests\test_menu_system.py" line="248" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_visibility_control" file="tests\test_menu_system.py" line="265" time="0.003" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_admin_only_items" file="tests\test_menu_system.py" line="287" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_render_menu" file="tests\test_menu_system.py" line="312" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_render_nonexistent_menu" file="tests\test_menu_system.py" line="323" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_navigate_to" file="tests\test_menu_system.py" line="330" time="0.009" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_navigate_to_access_denied" file="tests\test_menu_system.py" line="354" time="0.013" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_add_dynamic_menu" file="tests\test_menu_system.py" line="373" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_export_menu_config" file="tests\test_menu_system.py" line="398" time="0.004" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_import_menu_config" file="tests\test_menu_system.py" line="418" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuManager" name="test_register_callback" file="tests\test_menu_system.py" line="461" time="0.002" /><testcase classname="tests.test_menu_system.TestMenuMiddleware" name="test_middleware_adds_manager" file="tests\test_menu_system.py" line="482" time="0.007" /><testcase classname="tests.test_menu_system.TestMenuMiddleware" name="test_middleware_blocks_non_admin" file="tests\test_menu_system.py" line="497" time="0.010" /><testcase classname="tests.test_menu_system.TestMenuMiddleware" name="test_middleware_allows_admin" file="tests\test_menu_system.py" line="522" time="0.010" /><testcase classname="tests.test_menu_system.TestMenuMiddleware" name="test_middleware_allows_group_messages" file="tests\test_menu_system.py" line="545" time="0.013" /></testsuite></testsuites>